{"version":3,"sources":["../src/utils/array-cleaning.ts","../src/utils/cast-to-number.ts","../src/utils/get-request.ts","../src/utils/merge-classes.ts","../src/utils/strip-html.ts","../src/utils/type-check/is-undefined.ts"],"sourcesContent":["type RemovableValues = false | null | undefined;\n\n/**\n * 配列から `undefined`・`null`・`false` を取り除き、残りの要素を返す。\n *\n * @param items - フィルタリング対象の配列\n * @returns falsy 値（`false`・`null`・`undefined`）を取り除いた新しい配列\n */\nexport function arrayCleaning<T>(items: readonly T[]): Exclude<T, RemovableValues>[] {\n  return items.filter((item): item is Exclude<T, RemovableValues> => {\n    return item !== undefined && item !== null && item !== false;\n  });\n}\n\nexport type { RemovableValues };\n","/**\n * 与えられた値を整数に変換する。変換できない場合はフォールバック値、もしくは `undefined` を返す。\n *\n * @param data - 数値化を試みる値\n * @param fallbackData - 変換に失敗した際に返すフォールバック値\n * @returns 変換後の数値、またはフォールバック値／`undefined`\n */\nexport function castToNumber(data: unknown): number | undefined;\nexport function castToNumber(data: unknown, fallbackData: number): number;\nexport function castToNumber(\n  data: unknown,\n  fallbackData?: number,\n): number | undefined {\n  if (typeof data === \"number\") {\n    return data;\n  }\n\n  if (typeof data === \"string\") {\n    const parsedData = Number.parseInt(data, 10);\n    if (!Number.isNaN(parsedData)) {\n      return parsedData;\n    }\n  }\n\n  return fallbackData;\n}\n","export type Fetcher = typeof fetch;\nexport type GetRequestSuccess<T> = {\n  ok: true;\n  data: T;\n  error?: never;\n};\nexport type GetRequestFailure = {\n  ok: false;\n  data?: never;\n  error: Error;\n};\nexport type GetRequestResult<T> = GetRequestSuccess<T> | GetRequestFailure;\nexport type GetRequestParser<T> = (response: Response) => Promise<T>;\nexport type GetRequestOptions<T> = {\n  fetch?: Fetcher;\n  init?: RequestInit;\n  parser?: GetRequestParser<T>;\n};\n\nconst defaultParser = async <T>(response: Response): Promise<T> => {\n  return (await response.json()) as T;\n};\n\n/**\n * `fetch` を用いた GET リクエストを発行し、JSON などのレスポンスを取得する。\n * fetch 実装やパーサーを注入できるため、ブラウザ／Node 双方で柔軟に扱える。\n *\n * @param url - 送信先の URL\n * @param options - fetch 実装・リクエストオプション・レスポンスパーサーの指定\n * @returns 成功時は `ok: true` とデータ、失敗時は `ok: false` と `Error`\n */\nexport async function getRequest<T = unknown>(\n  url: string,\n  options: GetRequestOptions<T> = {},\n): Promise<GetRequestResult<T>> {\n  const { fetch: customFetch, init, parser = defaultParser<T> } = options;\n  const fetcher: Fetcher | undefined = customFetch ?? globalThis.fetch;\n\n  if (typeof fetcher !== \"function\") {\n    return {\n      error: new Error(\n        \"Fetch API is not available in the current environment.\",\n      ),\n      ok: false,\n    };\n  }\n\n  try {\n    const response = await fetcher(url, init);\n\n    if (!response.ok) {\n      throw new Error(`[${response.status}] ${response.statusText}`);\n    }\n\n    return {\n      data: await parser(response),\n      ok: true,\n    } satisfies GetRequestSuccess<T>;\n  } catch (error) {\n    return {\n      error: error instanceof Error ? error : new Error(\"Unknown error\"),\n      ok: false,\n    } satisfies GetRequestFailure;\n  }\n}\n","import { arrayCleaning } from \"./array-cleaning\";\n\nexport type ClassNameCandidate = string | false | null | undefined;\n\n/**\n * クラス候補のリストをまとめて結合し、 falsy な要素を除去した文字列を返す。\n *\n * @param classes - クラス名または falsy を含む可変長引数\n * @returns スペース区切りで結合されたクラス名\n */\nexport function mergeClasses(...classes: ClassNameCandidate[]): string {\n  return arrayCleaning<ClassNameCandidate>(classes).join(\" \");\n}\n","/**\n * HTML タグと代表的な実体参照を除去し、生テキストのみを取り出す。\n *\n * @param text - HTML を含む文字列\n * @returns タグと代表的なエンティティを取り除いた文字列\n */\nexport function stripHtml(text: string): string {\n  return text.replace(/(<([^>]+)>)/gi, \"\").replace(/&[a-z]+;/gi, \"\");\n}\n","/**\n * データが`undefined`型かチェックする。主に`number`型の`0`などの`falsy`なデータの未定義チェックを行いたい場合に使用する\n *\n * @param {unknown} data 渡されるデータ\n *\n * @return {boolean}\n */\nexport function isUndefined(data: unknown): data is undefined {\n  return typeof data === \"undefined\";\n}\n"],"mappings":";AAQO,SAAS,cAAiB,OAAoD;AACnF,SAAO,MAAM,OAAO,CAAC,SAA8C;AACjE,WAAO,SAAS,UAAa,SAAS,QAAQ,SAAS;AAAA,EACzD,CAAC;AACH;;;ACHO,SAAS,aACd,MACA,cACoB;AACpB,MAAI,OAAO,SAAS,UAAU;AAC5B,WAAO;AAAA,EACT;AAEA,MAAI,OAAO,SAAS,UAAU;AAC5B,UAAM,aAAa,OAAO,SAAS,MAAM,EAAE;AAC3C,QAAI,CAAC,OAAO,MAAM,UAAU,GAAG;AAC7B,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;;;ACNA,IAAM,gBAAgB,OAAU,aAAmC;AACjE,SAAQ,MAAM,SAAS,KAAK;AAC9B;AAUA,eAAsB,WACpB,KACA,UAAgC,CAAC,GACH;AAC9B,QAAM,EAAE,OAAO,aAAa,MAAM,SAAS,cAAiB,IAAI;AAChE,QAAM,UAA+B,eAAe,WAAW;AAE/D,MAAI,OAAO,YAAY,YAAY;AACjC,WAAO;AAAA,MACL,OAAO,IAAI;AAAA,QACT;AAAA,MACF;AAAA,MACA,IAAI;AAAA,IACN;AAAA,EACF;AAEA,MAAI;AACF,UAAM,WAAW,MAAM,QAAQ,KAAK,IAAI;AAExC,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,IAAI,SAAS,MAAM,KAAK,SAAS,UAAU,EAAE;AAAA,IAC/D;AAEA,WAAO;AAAA,MACL,MAAM,MAAM,OAAO,QAAQ;AAAA,MAC3B,IAAI;AAAA,IACN;AAAA,EACF,SAAS,OAAO;AACd,WAAO;AAAA,MACL,OAAO,iBAAiB,QAAQ,QAAQ,IAAI,MAAM,eAAe;AAAA,MACjE,IAAI;AAAA,IACN;AAAA,EACF;AACF;;;ACtDO,SAAS,gBAAgB,SAAuC;AACrE,SAAO,cAAkC,OAAO,EAAE,KAAK,GAAG;AAC5D;;;ACNO,SAAS,UAAU,MAAsB;AAC9C,SAAO,KAAK,QAAQ,iBAAiB,EAAE,EAAE,QAAQ,cAAc,EAAE;AACnE;;;ACDO,SAAS,YAAY,MAAkC;AAC5D,SAAO,OAAO,SAAS;AACzB;","names":[]}